class WinProbability
  # Probability of winning based on player value and dealer value â€” go to end of file for probability table
  PROBABILITIES = {
    4 => { 2 => 54, 3 => 56, 4 => 58, 5 => 60, 6 => 62, 7 => 42, 8 => 41, 9 => 40, 10 => 39, 11 => 37 },
    5 => { 2 => 55, 3 => 57, 4 => 59, 5 => 61, 6 => 63, 7 => 43, 8 => 42, 9 => 41, 10 => 40, 11 => 38 },
    6 => { 2 => 56, 3 => 58, 4 => 60, 5 => 62, 6 => 64, 7 => 44, 8 => 43, 9 => 42, 10 => 41, 11 => 39 },
    7 => { 2 => 57, 3 => 59, 4 => 61, 5 => 63, 6 => 65, 7 => 45, 8 => 44, 9 => 43, 10 => 42, 11 => 40 },
    8 => { 2 => 58, 3 => 60, 4 => 62, 5 => 64, 6 => 66, 7 => 46, 8 => 45, 9 => 44, 10 => 43, 11 => 41 },
    9 => { 2 => 59, 3 => 61, 4 => 63, 5 => 65, 6 => 67, 7 => 47, 8 => 46, 9 => 45, 10 => 44, 11 => 42 },
    10 => { 2 => 60, 3 => 62, 4 => 64, 5 => 66, 6 => 68, 7 => 48, 8 => 47, 9 => 46, 10 => 45, 11 => 43 },
    11 => { 2 => 61, 3 => 63, 4 => 65, 5 => 67, 6 => 69, 7 => 49, 8 => 48, 9 => 47, 10 => 46, 11 => 44 },
    12 => { 2 => 35, 3 => 37, 4 => 40, 5 => 42, 6 => 44, 7 => 25, 8 => 24, 9 => 23, 10 => 22, 11 => 20 },
    13 => { 2 => 39, 3 => 41, 4 => 43, 5 => 45, 6 => 47, 7 => 27, 8 => 26, 9 => 25, 10 => 24, 11 => 22 },
    14 => { 2 => 40, 3 => 42, 4 => 44, 5 => 46, 6 => 48, 7 => 28, 8 => 27, 9 => 26, 10 => 25, 11 => 23 },
    15 => { 2 => 41, 3 => 43, 4 => 45, 5 => 47, 6 => 49, 7 => 29, 8 => 28, 9 => 27, 10 => 26, 11 => 24 },
    16 => { 2 => 42, 3 => 44, 4 => 46, 5 => 48, 6 => 50, 7 => 30, 8 => 29, 9 => 28, 10 => 27, 11 => 25 },
    17 => { 2 => 50, 3 => 52, 4 => 54, 5 => 56, 6 => 58, 7 => 38, 8 => 37, 9 => 36, 10 => 35, 11 => 33 },
    18 => { 2 => 52, 3 => 54, 4 => 56, 5 => 58, 6 => 60, 7 => 40, 8 => 39, 9 => 38, 10 => 37, 11 => 35 },
    19 => { 2 => 54, 3 => 56, 4 => 58, 5 => 60, 6 => 62, 7 => 42, 8 => 41, 9 => 40, 10 => 39, 11 => 37 },
    20 => { 2 => 56, 3 => 58, 4 => 60, 5 => 62, 6 => 64, 7 => 44, 8 => 43, 9 => 42, 10 => 41, 11 => 39 },
    21 => { 2 => 58, 3 => 60, 4 => 62, 5 => 64, 6 => 66, 7 => 46, 8 => 45, 9 => 44, 10 => 43, 11 => 41 }
  }

  class << self
    def calculate(player_value, dealer_value)
      return 0 if player_value > 21

      win_probability = PROBABILITIES.dig(player_value, dealer_value)

      if win_probability.nil?
        raise StandardError, "Invalid player value: #{player_value}, dealer value: #{dealer_value}"
      end

      win_probability
    end
  end
end

# ASCII Table of Win Probabilities
#
# | Player Hand Value | Dealer Upcard | Player Win Probability (%) |
# |-------------------|---------------|----------------------------|
# | 4                 | 2             | 54                         |
# | 4                 | 3             | 56                         |
# | 4                 | 4             | 58                         |
# | 4                 | 5             | 60                         |
# | 4                 | 6             | 62                         |
# | 4                 | 7             | 42                         |
# | 4                 | 8             | 41                         |
# | 4                 | 9             | 40                         |
# | 4                 | 10            | 39                         |
# | 4                 | A             | 37                         |
# | 5                 | 2             | 55                         |
# | 5                 | 3             | 57                         |
# | 5                 | 4             | 59                         |
# | 5                 | 5             | 61                         |
# | 5                 | 6             | 63                         |
# | 5                 | 7             | 43                         |
# | 5                 | 8             | 42                         |
# | 5                 | 9             | 41                         |
# | 5                 | 10            | 40                         |
# | 5                 | A             | 38                         |
# | 6                 | 2             | 56                         |
# | 6                 | 3             | 58                         |
# | 6                 | 4             | 60                         |
# | 6                 | 5             | 62                         |
# | 6                 | 6             | 64                         |
# | 6                 | 7             | 44                         |
# | 6                 | 8             | 43                         |
# | 6                 | 9             | 42                         |
# | 6                 | 10            | 41                         |
# | 6                 | A             | 39                         |
# | 7                 | 2             | 57                         |
# | 7                 | 3             | 59                         |
# | 7                 | 4             | 61                         |
# | 7                 | 5             | 63                         |
# | 7                 | 6             | 65                         |
# | 7                 | 7             | 45                         |
# | 7                 | 8             | 44                         |
# | 7                 | 9             | 43                         |
# | 7                 | 10            | 42                         |
# | 7                 | A             | 40                         |
# | 8                 | 2             | 58                         |
# | 8                 | 3             | 60                         |
# | 8                 | 4             | 62                         |
# | 8                 | 5             | 64                         |
# | 8                 | 6             | 66                         |
# | 8                 | 7             | 46                         |
# | 8                 | 8             | 45                         |
# | 8                 | 9             | 44                         |
# | 8                 | 10            | 43                         |
# | 8                 | A             | 41                         |
# | 9                 | 2             | 59                         |
# | 9                 | 3             | 61                         |
# | 9                 | 4             | 63                         |
# | 9                 | 5             | 65                         |
# | 9                 | 6             | 67                         |
# | 9                 | 7             | 47                         |
# | 9                 | 8             | 46                         |
# | 9                 | 9             | 45                         |
# | 9                 | 10            | 44                         |
# | 9                 | A             | 42                         |
# | 10                | 2             | 60                         |
# | 10                | 3             | 62                         |
# | 10                | 4             | 64                         |
# | 10                | 5             | 66                         |
# | 10                | 6             | 68                         |
# | 10                | 7             | 48                         |
# | 10                | 8             | 47                         |
# | 10                | 9             | 46                         |
# | 10                | 10            | 45                         |
# | 10                | A             | 43                         |
# | 11                | 2             | 61                         |
# | 11                | 3             | 63                         |
# | 11                | 4             | 65                         |
# | 11                | 5             | 67                         |
# | 11                | 6             | 69                         |
# | 11                | 7             | 49                         |
# | 11                | 8             | 48                         |
# | 11                | 9             | 47                         |
# | 11                | 10            | 46                         |
# | 11                | A             | 44                         |
# | 12                | 2             | 35                         |
# | 12                | 3             | 37                         |
# | 12                | 4             | 40                         |
# | 12                | 5             | 42                         |
# | 12                | 6             | 44                         |
# | 12                | 7             | 25                         |
# | 12                | 8             | 24                         |
# | 12                | 9             | 23                         |
# | 12                | 10            | 22                         |
# | 12                | A             | 20                         |
# | 13                | 2             | 39                         |
# | 13                | 3             | 41                         |
# | 13                | 4             | 43                         |
# | 13                | 5             | 45                         |
# | 13                | 6             | 47                         |
# | 13                | 7             | 27                         |
# | 13                | 8             | 26                         |
# | 13                | 9             | 25                         |
# | 13                | 10            | 24                         |
# | 13                | A             | 22                         |
# | 14                | 2             | 40                         |
# | 14                | 3             | 42                         |
# | 14                | 4             | 44                         |
# | 14                | 5             | 46                         |
# | 14                | 6             | 48                         |
# | 14                | 7             | 28                         |
# | 14                | 8             | 27                         |
# | 14                | 9             | 26                         |
# | 14                | 10            | 25                         |
# | 14                | A             | 23                         |
# | 15                | 2             | 41                         |
# | 15                | 3             | 43                         |
# | 15                | 4             | 45                         |
# | 15                | 5             | 47                         |
# | 15                | 6             | 49                         |
# | 15                | 7             | 29                         |
# | 15                | 8             | 28                         |
# | 15                | 9             | 27                         |
# | 15                | 10            | 26                         |
# | 15                | A             | 24                         |
# | 16                | 2             | 42                         |
# | 16                | 3             | 44                         |
# | 16                | 4             | 46                         |
# | 16                | 5             | 48                         |
# | 16                | 6             | 50                         |
# | 16                | 7             | 30                         |
# | 16                | 8             | 29                         |
# | 16                | 9             | 28                         |
# | 16                | 10            | 27                         |
# | 16                | A             | 25                         |
# | 17                | 2             | 50                         |
# | 17                | 3             | 52                         |
# | 17                | 4             | 54                         |
# | 17                | 5             | 56                         |
# | 17                | 6             | 58                         |
# | 17                | 7             | 38                         |
# | 17                | 8             | 37                         |
# | 17                | 9             | 36                         |
# | 17                | 10            | 35                         |
# | 17                | A             | 33                         |
# | 18                | 2             | 52                         |
# | 18                | 3             | 54                         |
# | 18                | 4             | 56                         |
# | 18                | 5             | 58                         |
# | 18                | 6             | 60                         |
# | 18                | 7             | 40                         |
# | 18                | 8             | 39                         |
# | 18                | 9             | 38                         |
# | 18                | 10            | 37                         |
# | 18                | A             | 35                         |
# | 19                | 2             | 54                         |
# | 19                | 3             | 56                         |
# | 19                | 4             | 58                         |
# | 19                | 5             | 60                         |
# | 19                | 6             | 62                         |
# | 19                | 7             | 42                         |
# | 19                | 8             | 41                         |
# | 19                | 9             | 40                         |
# | 19                | 10            | 39                         |
# | 19                | A             | 37                         |
# | 20                | 2             | 56                         |
# | 20                | 3             | 58                         |
# | 20                | 4             | 60                         |
# | 20                | 5             | 62                         |
# | 20                | 6             | 64                         |
# | 20                | 7             | 44                         |
# | 20                | 8             | 43                         |
# | 20                | 9             | 42                         |
# | 20                | 10            | 41                         |
# | 20                | A             | 39                         |
# | 21                | 2             | 58                         |
# | 21                | 3             | 60                         |
# | 21                | 4             | 62                         |
# | 21                | 5             | 64                         |
# | 21                | 6             | 66                         |
# | 21                | 7             | 46                         |
# | 21                | 8             | 45                         |
# | 21                | 9             | 44                         |
# | 21                | 10            | 43                         |
# | 21                | A             | 41                         |